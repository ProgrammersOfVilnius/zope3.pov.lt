<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>zope.* on Python 3</title>
  <link rel="stylesheet" href="/style.css" />
  <style type="text/css">
    table              { margin-bottom: 2em; }
    th                 { vertical-align: bottom; }
    th.package-name    { padding-left: 0.5em; padding-right: 0.5em; }
    th.package-version { padding-left: 0.5em; padding-right: 0.5em; }
    th.version-column  { width: 1.5em; }
    td.unreleased      { color: #eee; }
    td.supported       { text-align: center; background: #dfd; color: #000; }
    td.unsupported     { text-align: center; background: #fdd; color: #000; }
    td.probably        { text-align: center; background: #efd; color: #444; }
    td.unknown         { text-align: center; background: #fdfdfd; color: #eee; }
    td.blockers        { text-align: right; color: #c44; }
    td.no-blockers     { color: #484; }
    td.version         { white-space: nowrap; }
  </style>
  <script type="text/javascript" src="/jquery/jquery.min.js"></script>
  <script type="text/javascript">
    // perhaps drop 3.0 and 3.1 from this list?  nobody cares about those
    var known_versions = ['', '2.4', '2.5', '2.6', '2.7', '', '3.0', '3.1', '3.2', '3.3', ''];
    $.getJSON('data.json', function(data) {
        var tbl = $('#support-table');
        tbl.html(
          '<thead>' +
            '<tr>' +
              '<th class="package-name" rowspan="2">Package</th>' +
              '<th class="package-version" rowspan="2">Version</th>' +
              '<th class="supports-py3" rowspan="2">Supports Python 3</th>' +
              '<th colspan="'+known_versions.length+'">Python Versions</th>' +
              '<th class="blockers" rowspan="2" title="Direct dependencies that have not been ported to Python 3 yet">Blockers</th>' +
            '</tr>' +
            '<tr>' +
            '</tr>' +
          '</thead>' +
          '<tbody>' +
          '</tbody>');
        var last_header_row = tbl.find('thead > tr:last');
        $.each(known_versions, function(idx, v) {
            var th = $('<th class="version-column">').text(v);
            th.appendTo(last_header_row);
        });
        var tbody = tbl.find('tbody');
        data.sort(function(a, b) {
            var r = 0;
            if (r == 0) r = !!b.version - !!a.version;        // unreleased last
            if (r == 0) r = b.supports_py3 - a.supports_py3;  // py3k-supporting first
            if (r == 0) r = b.supports.length - a.supports.length;
            if (r == 0) r = a.blockers.length - b.blockers.length;
            if (r == 0) r = (a.name < b.name ? -1 : 1); // assume a.name != b.name
            return r;
        });
        var pypi_url = 'http://pypi.python.org/pypi/';
        $.each(data, function(idx, pkg) {
            var row = $('<tr>');
            var td = $('<td>')
                  .append($('<a>')
                  .text(pkg.name)
                  .attr('href', pypi_url + pkg.name))
                  .appendTo(row);
            td = $('<td>')
                  .addClass('version')
                  .text(pkg.version || '(unreleased)')
                  .appendTo(row);
            if (!pkg.version) td.addClass('unreleased');
            td = $('<td>')
                  .text(pkg.supports_py3 ? 'yes' : 'no')
                  .addClass(pkg.supports_py3 ? 'supported' :
                            pkg.version ? 'unsupported' : 'unknown')
                  .appendTo(row);
            $.each(known_versions, function(idx, v) {
                if (!v) {
                    // hack to add spacing because I suck at CSS
                    row.append('<td>&nbsp;</td>');
                } else if (pkg.supports.length == 0) {
                    row.append('<td class="unknown">?</td>');
                } else if ($.inArray(v, pkg.supports) != -1) {
                    row.append('<td class="supported">+</td>');
                } else if ($.inArray(v.split('.')[0], pkg.supports) != -1) {
                    row.append('<td class="probably">?</td>');
                } else {
                    row.append('<td class="unsupported">-</td>');
                }
            });
            var blockers = pkg.blockers || [];
            td = $('<td>')
                  .addClass('blockers')
                  .text(blockers.length)
                  .attr('title', blockers.join('\n'))
                  .appendTo(row);
            if (blockers.length == 0) td.addClass('no-blockers');
            row.appendTo(tbody);
        });
    });
  </script>
</head>
<body>
  <h1>Unofficial Zope 3 on Python 3 status page</h1>

  <table id="support-table">
    <tr>
      <td>Loading...</td>
    </tr>
  </table>

  <p>This page lists all projects from <a href="http://svn.zope.org">svn.zope.org</a>
    and the new <a href="https://github.com/ZopeFoundation">GitHub
    ZopeFoundation organization</a>, and shows the latest version published on
    the <a href="http://pypi.python.org/pypi">Python Package Index</a> and the
    explicitly declared supported Python versions from trove classifiers for
    that version.</p>

  <p>The data are updated daily by a cron script.</p>

  <div class="footer"> 
    Site maintained by <a href="http://pov.lt/">Programmers of Vilnius</a>.
    This site uses <a href="http://validator.w3.org/check/referer">valid</a> HTML and CSS.<br /> 
    If you experience any problems with the website, please contact <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#119;&#101;&#98;&#109;&#97;&#115;&#116;&#101;&#114;&#64;&#112;&#111;&#118;&#46;&#108;&#116;">&#119;&#101;&#98;&#109;&#97;&#115;&#116;&#101;&#114;&#64;&#112;&#111;&#118;&#46;&#108;&#116;</a>.
  </div> 

</body>
</html>
